<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="renderer" content="webkit">
	<meta name="robots" content="index,follow" />
	<link rel="stylesheet" type="text/css" href="./index.css">
	<script src="./jq.js"></script>
	<script src="./data.js"></script>
	<script src="./zhouyi.js"></script>
	<title>周易</title>
</head>
<body>
	<div id="main">
		<div id="top">
			<div id="logo"></div>
			<div id="header">周易</div>
		</div>
		<div id="content">
			<span class="expand"></span>
		</div>
		<div id="bottom">
				<div class="btn_red" id="btn_go_random">占卦</div>
				<div class="btn_grey" id="btn_go_input">解卦</div>
		</div>
	</div>
		<div class="base" id="base0">
			<div class="tips" id="bengua_tips"></div>
			<div class="tips" id="zhigua_tips"></div>
			<div id="ci"></div>
			<div class="left btn_grey">返回</div>
		</div>
		<div class="base" id="base1">
			<div id="key">
				<div class="tips">请输入参数<br>例如：678796</div>
				<div id="key_box"><input type="text" id="enter_key"><div id="info"></div></div>
				<div class="btn_red" id="btn_go">占卦</div>
				<div class="left btn_grey">返回</div>
			</div>
		</div>
		<div class="notice">
			<h1>注意</h1>
			<ul>
				<li>1、占卦并不能预知未来。仅仅是根据前人的经验提醒自己，趋利避害。</li>
				<li>2、吉凶由人说。请保持必要的仪式感，明确需要占卦的事情再根据卦辞自己解读，本站仅提供周易的原文及翻译，并不解卦。</li>
				<li>3、命越占越薄。请谨慎使用，原则上一事一占，不要以玩乐的心态随意测试。</li>
			</ul>
			<div class="btn_red" id="btn_start">确认</div>
		</div>
<script type="text/javascript">
	$(document).ready(function() {
	$('.base,#main').hide();
	$('#content').removeClass('fullwidth');
		$('#btn_start').click(function(){
			$('.notice').hide();
			$('#main').show();
		})	    
		$('#btn_go_random').click(function() {
			var a = zhouYi();
			console.log(a);
			$('#bengua_tips').html('本卦：'+a.benGuaName);
			$('#zhigua_tips').html('之卦：'+a.zhiGuaName);
			$('#ci').html(a.content);
			$('#base0').show();
			$('#content').addClass('fullwidth');
			setTimeout(function(){
			$('#content').animate({bottom:'-=600px'},2000,function(){$('#main').hide();});
		    $('#top').animate({top:'-=600px'},2000);
		    $('#bottom').animate({bottom:'-=600px'},2000);
			},2000);
		    });
		$('#btn_go_input').click(function() {
			$('#base1').show();
			$('#content').addClass('fullwidth');
			setTimeout(function(){
			$('#content').animate({bottom:'-=600px'},2000,function(){$('#main').hide();$('#enter_key').focus();});
		    $('#top').animate({top:'-=600px'},2000);
		    $('#bottom').animate({bottom:'-=600px'},2000);
			},2000);
		    });
		$('#enter_key').focus(function(){
            $(this).removeClass('input_error');$('#info').text('');
        });
		$('#btn_go').click(function(){
			var patt=/^[6-9]{6}/;
			var text = $('#enter_key').val();
			if(patt.test(parseInt(text))){
				var txt=text.split('').map(Number);
				var a = zhouYi(txt);
				console.log(a);
				$('#bengua_tips').html('本卦：'+a.benGuaName);
				$('#zhigua_tips').html('之卦：'+a.zhiGuaName);
				$('#ci').html(a.content);
				$('#base0').show();
				$('#base1').hide();
			}else{
				$('#enter_key').addClass('input_error');$('#info').text('参数格式错误。只能是含有6789的六位数');
			}
		});
		$('.left').click(function(){
			$('#main').show();
			$('#content').animate({bottom:'+=600px'},1000,function(){$('.base').hide();});
		    $('#top').animate({top:'+=600px'},1000);
		    $('#bottom').animate({bottom:'+=600px'},1000);
		    $('#content').removeClass('fullwidth');
		});
		});
</script>
</body>
</html>